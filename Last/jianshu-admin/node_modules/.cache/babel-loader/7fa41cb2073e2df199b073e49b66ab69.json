{"remainingRequest":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/http/index.js","dependencies":[{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/http/index.js","mtime":1620094264000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/babel.config.js","mtime":1620040888000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3pob3UvRGVza3RvcC9Ob2RlTGVhcm5pbmcvTGFzdC9qaWFuc2h1LWFkbWluL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWVANy4xOC4zQEBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvemhvdS9EZXNrdG9wL05vZGVMZWFybmluZy9MYXN0L2ppYW5zaHUtYWRtaW4vbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE4LjNAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLAogIHRpbWVvdXQ6IDUwMDAKfSk7Cmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKGxvY2FsU3RvcmFnZS50b2tlbikgewogICAgY29uZmlnLmhlYWRlcnMuYXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS50b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBjb25zb2xlLmVycm9yKCfor7fmsYLlpLHotKUnLCBlcnIpOwp9KTsKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgLy/or7fmsYLmiJDlip/lr7nlk43lupTmlbDmja7lgZrlpITnkIYKICByZXR1cm4gcmVzOyAvL+ivpei/lOWbnuWvueixoeS8muS8oOWIsOivt+axguaWueazleeahOWTjeW6lOWvueixoeS4rQp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgLy8g5ZON5bqU6ZSZ6K+v5aSE55CGCiAgLy8gbG9jYXRpb24uaHJlZiA9ICcvbG9naW4nCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwoKZnVuY3Rpb24gaHR0cCgpIHsKICByZXR1cm4gX2h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2h0dHAoKSB7CiAgX2h0dHAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICB2YXIgb3B0aW9uLAogICAgICAgIHJlc3VsdCwKICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgb3B0aW9uID0gX2FyZ3MubGVuZ3RoID4gMCAmJiBfYXJnc1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMF0gOiB7fTsKICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDsKCiAgICAgICAgICAgIGlmICghKG9wdGlvbi5tZXRob2QgPT09ICdnZXQnIHx8IG9wdGlvbi5tZXRob2QgPT09ICdkZWxldGUnKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlW29wdGlvbi5tZXRob2RdKG9wdGlvbi5wYXRoLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBvcHRpb24ucGFyYW1zCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHJlc3VsdCA9IHJlcy5kYXRhOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gZXJyOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBpZiAoIShvcHRpb24ubWV0aG9kID09PSAncG9zdCcgfHwgb3B0aW9uLm1ldGhvZCA9PT0gJ3B1dCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZVtvcHRpb24ubWV0aG9kXShvcHRpb24ucGF0aCwgb3B0aW9uLnBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICByZXN1bHQgPSBlcnI7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9odHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBkZWZhdWx0IGh0dHA7"},{"version":3,"names":["axios","instance","create","baseURL","timeout","interceptors","request","use","config","localStorage","token","headers","authorization","err","console","error","response","res","Promise","reject","http","option","result","method","path","params","then","data","catch"],"sources":["/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/http/index.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nlet instance = axios.create({\r\n    baseURL: 'http://localhost:3000',\r\n    timeout: 5000\r\n})\r\n\r\ninstance.interceptors.request.use(config => {\r\n    if (localStorage.token) {\r\n        config.headers.authorization = 'Bearer ' + localStorage.token;\r\n    }\r\n    return config\r\n}, err => {\r\n    console.error('请求失败', err)\r\n})\r\n\r\ninstance.interceptors.response.use(res => {\r\n    //请求成功对响应数据做处理\r\n    return res //该返回对象会传到请求方法的响应对象中\r\n}, err => {\r\n    // 响应错误处理\r\n    // location.href = '/login'\r\n    return Promise.reject(err);\r\n})\r\n\r\nasync function http(option = {}) {\r\n\r\n    let result = null\r\n    if (option.method === 'get' || option.method === 'delete') {\r\n        await instance[option.method](\r\n            option.path,\r\n            { params: option.params }\r\n        ).then(res => {\r\n            result = res.data\r\n        }).catch(err => {\r\n            result = err\r\n        })\r\n    } else if (option.method === 'post' || option.method === 'put') {\r\n        await instance[option.method](\r\n            option.path,\r\n            option.params\r\n        ).then(res => {\r\n            result = res.data\r\n        }).catch(err => {\r\n            result = err\r\n        })\r\n    }\r\n\r\n    return result\r\n}\r\n\r\nexport default http"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAIC,QAAQ,GAAGD,KAAK,CAACE,MAAN,CAAa;EACxBC,OAAO,EAAE,uBADe;EAExBC,OAAO,EAAE;AAFe,CAAb,CAAf;AAKAH,QAAQ,CAACI,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAAC,MAAM,EAAI;EACxC,IAAIC,YAAY,CAACC,KAAjB,EAAwB;IACpBF,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+B,YAAYH,YAAY,CAACC,KAAxD;EACH;;EACD,OAAOF,MAAP;AACH,CALD,EAKG,UAAAK,GAAG,EAAI;EACNC,OAAO,CAACC,KAAR,CAAc,MAAd,EAAsBF,GAAtB;AACH,CAPD;AASAZ,QAAQ,CAACI,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CAAmC,UAAAU,GAAG,EAAI;EACtC;EACA,OAAOA,GAAP,CAFsC,CAE3B;AACd,CAHD,EAGG,UAAAJ,GAAG,EAAI;EACN;EACA;EACA,OAAOK,OAAO,CAACC,MAAR,CAAeN,GAAf,CAAP;AACH,CAPD;;SASeO,I;;;;;qEAAf;IAAA;IAAA;IAAA;IAAA;MAAA;QAAA;UAAA;YAAoBC,MAApB,2DAA6B,EAA7B;YAEQC,MAFR,GAEiB,IAFjB;;YAAA,MAGQD,MAAM,CAACE,MAAP,KAAkB,KAAlB,IAA2BF,MAAM,CAACE,MAAP,KAAkB,QAHrD;cAAA;cAAA;YAAA;;YAAA;YAAA,OAIctB,QAAQ,CAACoB,MAAM,CAACE,MAAR,CAAR,CACFF,MAAM,CAACG,IADL,EAEF;cAAEC,MAAM,EAAEJ,MAAM,CAACI;YAAjB,CAFE,EAGJC,IAHI,CAGC,UAAAT,GAAG,EAAI;cACVK,MAAM,GAAGL,GAAG,CAACU,IAAb;YACH,CALK,EAKHC,KALG,CAKG,UAAAf,GAAG,EAAI;cACZS,MAAM,GAAGT,GAAT;YACH,CAPK,CAJd;;UAAA;YAAA;YAAA;;UAAA;YAAA,MAYeQ,MAAM,CAACE,MAAP,KAAkB,MAAlB,IAA4BF,MAAM,CAACE,MAAP,KAAkB,KAZ7D;cAAA;cAAA;YAAA;;YAAA;YAAA,OAactB,QAAQ,CAACoB,MAAM,CAACE,MAAR,CAAR,CACFF,MAAM,CAACG,IADL,EAEFH,MAAM,CAACI,MAFL,EAGJC,IAHI,CAGC,UAAAT,GAAG,EAAI;cACVK,MAAM,GAAGL,GAAG,CAACU,IAAb;YACH,CALK,EAKHC,KALG,CAKG,UAAAf,GAAG,EAAI;cACZS,MAAM,GAAGT,GAAT;YACH,CAPK,CAbd;;UAAA;YAAA,iCAuBWS,MAvBX;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;AA0BA,eAAeF,IAAf"}]}