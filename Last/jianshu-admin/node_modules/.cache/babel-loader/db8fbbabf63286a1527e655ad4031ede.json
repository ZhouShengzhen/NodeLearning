{"remainingRequest":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/router/beforeEach.js","dependencies":[{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/router/beforeEach.js","mtime":1620094712000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/babel.config.js","mtime":1620040888000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBodHRwIGZyb20gJy4uL2h0dHAnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwovKioNCiAqIOi3r+eUseeahOWJjee9ruWuiOWNq++8jOiwg+eUqOivpeaWueazleaXtumcgOimgeS8oOWFpei3r+eUseWvueixoeS9nOS4uuWPguaVsA0KICovCgpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHJvdXRlcikgewogIHJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogICAgaWYgKHRvLm5hbWUgPT09ICdBcnRpY2xlTGlzdCcgfHwgdG8ubmFtZSA9PT0gJ0FydGljbGUnKSB7CiAgICAgIC8v6K6+572udGl0bGUKICAgICAgZG9jdW1lbnQudGl0bGUgPSB0by5tZXRhLnRpdGxlID8gdG8ubWV0YS50aXRsZSA6ICfnroDkuaYnOwogICAgICBuZXh0KCk7CiAgICAgIHJldHVybjsKICAgIH0gLy/orr7nva50aXRsZQoKCiAgICBkb2N1bWVudC50aXRsZSA9IHRvLm1ldGEudGl0bGUgPyB0by5tZXRhLnRpdGxlIDogJ+eugOS5puWQjuWPsOeuoeeQhuezu+e7nyc7IC8v5qCh6aqM5piv5ZCm5a2Y5ZyodG9rZW4KCiAgICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7CiAgICAgIC8v6aqM6K+BdG9rZW7mmK/lkKbmnInmlYjvvIzlubbojrflj5bnlKjmiLfkv6Hmga/lj4rmnYPpmZAKICAgICAgaHR0cCh7CiAgICAgICAgcGF0aDogJy91c2Vycy92ZXJpZnknLAogICAgICAgIG1ldGhvZDogJ2dldCcKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0VXNlcm5hbWUnLCByZXMudXNlcik7CgogICAgICAgICAgaWYgKHRvLnBhdGggIT09ICcvbG9naW4nKSB7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5leHQoJy9hZG1pbicpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodG8ucGF0aCAhPT0gJy9sb2dpbicpIHsKICAgICAgICAgICAgbmV4dCgnL2xvZ2luJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8v5Yik5pat5b2T5YmN6KaB6Lez6L2s55qE6Lev55Sx5piv5ZCm5Li6Jy9sb2dpbifvvIzlpoLmnpzkuI3liqDmraTliKTmlq3vvIzkvJrmiqXlhoXlrZjmuqLlh7rnmoTplJnor68KICAgICAgaWYgKHRvLnBhdGggIT09ICcvbG9naW4nKSB7CiAgICAgICAgbmV4dCgnL2xvZ2luJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn0pOw=="},{"version":3,"names":["http","store","router","beforeEach","to","from","next","name","document","title","meta","localStorage","token","path","method","then","res","code","commit","user"],"sources":["/Users/zhou/Desktop/NodeLearning/Last/jianshu-admin/src/router/beforeEach.js"],"sourcesContent":["import http from '../http'\r\nimport store from '../store'\r\n/**\r\n * 路由的前置守卫，调用该方法时需要传入路由对象作为参数\r\n */\r\nexport default (router) => {\r\n    router.beforeEach((to, from, next) => {\r\n        if (to.name === 'ArticleList' || to.name === 'Article') {\r\n            //设置title\r\n            document.title = to.meta.title ? to.meta.title : '简书'\r\n            next()\r\n            return\r\n        }\r\n\r\n        //设置title\r\n        document.title = to.meta.title ? to.meta.title : '简书后台管理系统'\r\n\r\n        //校验是否存在token\r\n        if (localStorage.token) {\r\n            //验证token是否有效，并获取用户信息及权限\r\n            http({\r\n                path: '/users/verify',\r\n                method: 'get'\r\n            }).then(res => {\r\n                if (res.code === 200) {\r\n                    store.commit('setUsername', res.user)\r\n                    if (to.path !== '/login') {\r\n                        next()\r\n                    } else {\r\n                        next('/admin')\r\n                    }\r\n                } else {\r\n                    if (to.path !== '/login') {\r\n                        next('/login')\r\n                    } else {\r\n                        next()\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            //判断当前要跳转的路由是否为'/login'，如果不加此判断，会报内存溢出的错误\r\n            if (to.path !== '/login') {\r\n                next('/login')\r\n            } else {\r\n                next()\r\n            }\r\n        }\r\n    })\r\n}"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,SAAjB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA;AACA;AACA;;AACA,gBAAe,UAACC,MAAD,EAAY;EACvBA,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;IAClC,IAAIF,EAAE,CAACG,IAAH,KAAY,aAAZ,IAA6BH,EAAE,CAACG,IAAH,KAAY,SAA7C,EAAwD;MACpD;MACAC,QAAQ,CAACC,KAAT,GAAiBL,EAAE,CAACM,IAAH,CAAQD,KAAR,GAAgBL,EAAE,CAACM,IAAH,CAAQD,KAAxB,GAAgC,IAAjD;MACAH,IAAI;MACJ;IACH,CANiC,CAQlC;;;IACAE,QAAQ,CAACC,KAAT,GAAiBL,EAAE,CAACM,IAAH,CAAQD,KAAR,GAAgBL,EAAE,CAACM,IAAH,CAAQD,KAAxB,GAAgC,UAAjD,CATkC,CAWlC;;IACA,IAAIE,YAAY,CAACC,KAAjB,EAAwB;MACpB;MACAZ,IAAI,CAAC;QACDa,IAAI,EAAE,eADL;QAEDC,MAAM,EAAE;MAFP,CAAD,CAAJ,CAGGC,IAHH,CAGQ,UAAAC,GAAG,EAAI;QACX,IAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;UAClBhB,KAAK,CAACiB,MAAN,CAAa,aAAb,EAA4BF,GAAG,CAACG,IAAhC;;UACA,IAAIf,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;YACtBP,IAAI;UACP,CAFD,MAEO;YACHA,IAAI,CAAC,QAAD,CAAJ;UACH;QACJ,CAPD,MAOO;UACH,IAAIF,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;YACtBP,IAAI,CAAC,QAAD,CAAJ;UACH,CAFD,MAEO;YACHA,IAAI;UACP;QACJ;MACJ,CAlBD;IAmBH,CArBD,MAqBO;MACH;MACA,IAAIF,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;QACtBP,IAAI,CAAC,QAAD,CAAJ;MACH,CAFD,MAEO;QACHA,IAAI;MACP;IACJ;EACJ,CAzCD;AA0CH,CA3CD"}]}